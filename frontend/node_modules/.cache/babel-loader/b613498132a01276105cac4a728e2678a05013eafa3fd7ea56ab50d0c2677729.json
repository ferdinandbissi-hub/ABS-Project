{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_URL=\"/api\";export default function RegisterLogin(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[role,setRole]=useState(\"customer\");const navigate=useNavigate();async function submit(endpoint){const payload=endpoint===\"register\"?{email,password,role}:{email,password};try{const res=await fetch(\"\".concat(API_URL,\"/\").concat(endpoint),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});const data=await res.json();console.log(\"HTTP status:\",res.status,\"Response:\",data);if(!res.ok){alert(data.message||\"Error \".concat(res.status));return;}localStorage.setItem(\"token\",data.token);localStorage.setItem(\"role\",data.role);navigate(\"/\".concat(data.role));}catch(error){console.error(\"Network error:\",error);alert(\"Network error. Please try again.\");}}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:400,margin:\"50px auto\",padding:30,fontSize:18,borderRadius:10,backgroundColor:\"#e0f7fa\",boxShadow:\"0 0 10px rgba(0,0,0,0.2)\"},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{textAlign:\"center\",marginBottom:20},children:[role===\"provider\"?\"Provider\":\"Customer\",\" Login/Register\"]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:{width:\"100%\",margin:\"10px 0\",fontSize:16,padding:10,borderRadius:5,border:\"1px solid #ccc\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),style:{width:\"100%\",margin:\"10px 0\",fontSize:16,padding:10,borderRadius:5,border:\"1px solid #ccc\"}}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),style:{width:\"100%\",margin:\"10px 0\",fontSize:16,padding:10,borderRadius:5,border:\"1px solid #ccc\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"customer\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"provider\",children:\"Provider\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",marginTop:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>submit(\"register\"),style:{width:\"48%\",fontSize:16,padding:10,borderRadius:5,cursor:\"pointer\",backgroundColor:\"#00796b\",color:\"#fff\",border:\"none\"},children:\"Register\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>submit(\"login\"),style:{width:\"48%\",fontSize:16,padding:10,borderRadius:5,cursor:\"pointer\",backgroundColor:\"#004d40\",color:\"#fff\",border:\"none\"},children:\"Login\"})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","jsxs","_jsxs","jsx","_jsx","API_URL","RegisterLogin","email","setEmail","password","setPassword","role","setRole","navigate","submit","endpoint","payload","res","fetch","concat","method","headers","body","JSON","stringify","data","json","console","log","status","ok","alert","message","localStorage","setItem","token","error","style","maxWidth","margin","padding","fontSize","borderRadius","backgroundColor","boxShadow","children","textAlign","marginBottom","placeholder","value","onChange","e","target","width","border","type","display","justifyContent","marginTop","onClick","cursor","color"],"sources":["/home/student25/ABS-Project/frontend/src/components/RegisterLogin.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst API_URL = \"/api\";\n\nexport default function RegisterLogin() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"customer\");\n  const navigate = useNavigate();\n\n  async function submit(endpoint) {\n    const payload = endpoint === \"register\" ? { email, password, role } : { email, password };\n\n    try {\n      const res = await fetch(`${API_URL}/${endpoint}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await res.json();\n      console.log(\"HTTP status:\", res.status, \"Response:\", data); \n\n      if (!res.ok) {\n        alert(data.message || `Error ${res.status}`);\n        return;\n      }\n\n      localStorage.setItem(\"token\", data.token);\n      localStorage.setItem(\"role\", data.role);\n      navigate(`/${data.role}`);\n    } catch (error) {\n      console.error(\"Network error:\", error);\n      alert(\"Network error. Please try again.\");\n    }\n  }\n\n  return (\n    <div style={{\n      maxWidth: 400, margin: \"50px auto\", padding: 30, fontSize: 18,\n      borderRadius: 10, backgroundColor: \"#e0f7fa\", boxShadow: \"0 0 10px rgba(0,0,0,0.2)\"\n    }}>\n      <h2 style={{ textAlign: \"center\", marginBottom: 20 }}>{role === \"provider\" ? \"Provider\" : \"Customer\"} Login/Register</h2>\n      <input placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)}\n        style={{ width: \"100%\", margin: \"10px 0\", fontSize: 16, padding: 10, borderRadius: 5, border: \"1px solid #ccc\" }} />\n      <input type=\"password\" placeholder=\"Password\" value={password} onChange={e => setPassword(e.target.value)}\n        style={{ width: \"100%\", margin: \"10px 0\", fontSize: 16, padding: 10, borderRadius: 5, border: \"1px solid #ccc\" }} />\n      <select value={role} onChange={e => setRole(e.target.value)}\n        style={{ width: \"100%\", margin: \"10px 0\", fontSize: 16, padding: 10, borderRadius: 5, border: \"1px solid #ccc\" }}>\n        <option value=\"customer\">Customer</option>\n        <option value=\"provider\">Provider</option>\n      </select>\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", marginTop: 10 }}>\n        <button onClick={() => submit(\"register\")} style={{ width: \"48%\", fontSize: 16, padding: 10, borderRadius: 5, cursor: \"pointer\", backgroundColor: \"#00796b\", color: \"#fff\", border: \"none\" }}>Register</button>\n        <button onClick={() => submit(\"login\")} style={{ width: \"48%\", fontSize: 16, padding: 10, borderRadius: 5, cursor: \"pointer\", backgroundColor: \"#004d40\", color: \"#fff\", border: \"none\" }}>Login</button>\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}