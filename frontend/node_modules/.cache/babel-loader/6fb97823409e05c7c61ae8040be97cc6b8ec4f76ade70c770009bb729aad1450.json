{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import FullCalendar from\"@fullcalendar/react\";import dayGridPlugin from\"@fullcalendar/daygrid\";import timeGridPlugin from\"@fullcalendar/timegrid\";import interactionPlugin from\"@fullcalendar/interaction\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CustomerDashboard(){const[services,setServices]=useState([]);const[appointments,setAppointments]=useState([]);const[selectedServiceId,setSelectedServiceId]=useState(null);const[slot,setSlot]=useState(\"\");const[calendarEvents,setCalendarEvents]=useState([]);const getToken=()=>localStorage.getItem(\"token\");/* ================= FETCH SERVICES ================= */const fetchServices=useCallback(async()=>{try{const res=await fetch(\"http://localhost:5000/services\",{headers:{Authorization:\"Bearer \"+getToken()}});const data=await res.json();setServices(Array.isArray(data)?data:[]);}catch(err){console.error(err);}},[]);/* ================= FETCH APPOINTMENTS ================= */const fetchAppointments=useCallback(async()=>{try{const res=await fetch(\"http://localhost:5000/appointments\",{headers:{Authorization:\"Bearer \"+getToken()}});const data=await res.json();setAppointments(Array.isArray(data)?data.filter(a=>a.status===\"booked\"):[]);}catch(err){console.error(err);}},[]);useEffect(()=>{fetchServices();fetchAppointments();},[fetchServices,fetchAppointments]);/* ================= BOOK APPOINTMENT ================= */const handleBookAppointment=async e=>{e.preventDefault();if(!slot)return alert(\"Please enter a slot\");const isoSlot=new Date(slot).toISOString();try{await fetch(\"http://localhost:5000/appointments\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+getToken()},body:JSON.stringify({serviceId:Number(selectedServiceId),slot:isoSlot})});setSlot(\"\");setSelectedServiceId(null);fetchAppointments();fetchServices();}catch(err){console.error(err);}};/* ================= CANCEL APPOINTMENT ================= */const handleCancelAppointment=async appointmentId=>{try{await fetch(\"http://localhost:5000/appointments/\".concat(appointmentId),{method:\"DELETE\",headers:{Authorization:\"Bearer \"+getToken()}});setAppointments(prev=>prev.filter(a=>a.id!==appointmentId));fetchServices();}catch(err){console.error(err);}};/* ================= AVAILABLE SERVICES ================= */const availableServices=services.filter(s=>!appointments.some(a=>a.serviceId===s.id&&a.status===\"booked\"));/* ================= CALENDAR ================= */useEffect(()=>{if(!selectedServiceId)return;const service=services.find(s=>s.id===selectedServiceId);if(!service)return;Promise.all([fetch(\"http://localhost:5000/working-hours?providerEmail=\".concat(service.providerEmail),{headers:{Authorization:\"Bearer \"+getToken()}}).then(res=>res.json()),fetch(\"http://localhost:5000/provider-appointments/\".concat(service.providerEmail),{headers:{Authorization:\"Bearer \"+getToken()}}).then(res=>res.json())]).then(_ref=>{let[whData,bookedData]=_ref;const dayMap={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};const today=new Date();const monday=new Date(today);monday.setDate(today.getDate()-today.getDay()+1);// lundi\n// === WORKING HOURS (hachures vert plus foncé) ===\nlet workingEvents=[];(whData.hours||[]).forEach(h=>{const dayIndex=dayMap[h.day];if(dayIndex===undefined)return;const day=new Date(monday);day.setDate(monday.getDate()+(dayIndex+6)%7);const[sh,sm]=h.start.split(\":\").map(Number);const[eh,em]=h.end.split(\":\").map(Number);const start=new Date(day);start.setHours(sh,sm,0,0);const end=new Date(day);end.setHours(eh,em,0,0);workingEvents.push({start:start.toISOString(),end:end.toISOString(),display:\"background\",backgroundColor:\"#82e0aa\",// plus foncé\noverlap:false});});// === BOOKED SLOTS ===\nconst bookedEvents=bookedData.map(a=>({start:a.slot,end:new Date(new Date(a.slot).getTime()+30*60*1000).toISOString(),title:\"❌ Already booked\",backgroundColor:\"#f1948a\",borderColor:\"#c0392b\"}));setCalendarEvents([...workingEvents,...bookedEvents]);}).catch(console.error);},[selectedServiceId,services]);/* ================= RENDER ================= */return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"800px\",margin:\"20px auto\",padding:\"20px\",fontFamily:\"Arial\"},children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .fc-day-today { background: transparent !important; }\\n        .fc-timegrid-now-indicator {\\n          border-color: red !important;\\n          border-width: 2px;\\n        }\\n      \"}),/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",color:\"#2c3e50\"},children:\"Customer Dashboard\"}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:\"40px\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#34495e\"},children:\"Available Services\"}),availableServices.length>0?availableServices.map(s=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #ccc\",padding:\"15px\",marginBottom:\"10px\",borderRadius:\"5px\",backgroundColor:\"#ecf0f1\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 5px 0\",color:\"#2c3e50\"},children:s.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"0 0 5px 0\",color:\"#7f8c8d\"},children:s.description}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:\"#16a085\"},children:[\"$\",s.price]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedServiceId(s.id),style:{marginTop:\"10px\",padding:\"8px 12px\",backgroundColor:\"#3498db\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"Book Slot\"})]},s.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No services available.\"})]}),selectedServiceId&&/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:\"40px\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#34495e\"},children:\"Book a Slot\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleBookAppointment,style:{marginBottom:\"20px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:slot,onChange:e=>setSlot(e.target.value),required:true,style:{padding:\"8px\",borderRadius:\"5px\",marginRight:\"10px\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"8px 12px\",backgroundColor:\"#27ae60\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"Book Appointment\"})]}),/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin,timeGridPlugin,interactionPlugin],initialView:\"timeGridWeek\",events:calendarEvents,height:\"auto\",slotMinTime:\"08:00:00\",slotMaxTime:\"20:00:00\",allDaySlot:false,nowIndicator:true,slotDuration:\"00:30:00\",slotLabelInterval:\"01:00\",slotLabelFormat:{hour:\"2-digit\",minute:\"2-digit\",hour12:false}})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#34495e\"},children:\"My Appointments\"}),appointments.length>0?/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0},children:appointments.map(a=>/*#__PURE__*/_jsxs(\"li\",{style:{border:\"1px solid #ccc\",padding:\"10px\",marginBottom:\"10px\",borderRadius:\"5px\",backgroundColor:\"#ecf0f1\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Service:\"}),\" \",a.serviceTitle,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Slot:\"}),\" \",a.slot,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelAppointment(a.id),style:{marginTop:\"5px\",padding:\"5px 10px\",backgroundColor:\"#e74c3c\",color:\"#fff\",border:\"none\",borderRadius:\"3px\",cursor:\"pointer\"},children:\"Cancel\"})]},a.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No appointments yet.\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","jsx","_jsx","jsxs","_jsxs","CustomerDashboard","services","setServices","appointments","setAppointments","selectedServiceId","setSelectedServiceId","slot","setSlot","calendarEvents","setCalendarEvents","getToken","localStorage","getItem","fetchServices","res","fetch","headers","Authorization","data","json","Array","isArray","err","console","error","fetchAppointments","filter","a","status","handleBookAppointment","e","preventDefault","alert","isoSlot","Date","toISOString","method","body","JSON","stringify","serviceId","Number","handleCancelAppointment","appointmentId","concat","prev","id","availableServices","s","some","service","find","Promise","all","providerEmail","then","_ref","whData","bookedData","dayMap","Sun","Mon","Tue","Wed","Thu","Fri","Sat","today","monday","setDate","getDate","getDay","workingEvents","hours","forEach","h","dayIndex","day","undefined","sh","sm","start","split","map","eh","em","end","setHours","push","display","backgroundColor","overlap","bookedEvents","getTime","title","borderColor","catch","style","maxWidth","margin","padding","fontFamily","children","textAlign","color","marginBottom","length","border","borderRadius","description","price","onClick","marginTop","cursor","onSubmit","type","value","onChange","target","required","marginRight","plugins","initialView","events","height","slotMinTime","slotMaxTime","allDaySlot","nowIndicator","slotDuration","slotLabelInterval","slotLabelFormat","hour","minute","hour12","listStyle","serviceTitle"],"sources":["/home/student25/ABS-Project/frontend/src/components/CustomerDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\n\nexport default function CustomerDashboard() {\n  const [services, setServices] = useState([]);\n  const [appointments, setAppointments] = useState([]);\n  const [selectedServiceId, setSelectedServiceId] = useState(null);\n  const [slot, setSlot] = useState(\"\");\n  const [calendarEvents, setCalendarEvents] = useState([]);\n\n  const getToken = () => localStorage.getItem(\"token\");\n\n  /* ================= FETCH SERVICES ================= */\n  const fetchServices = useCallback(async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/services\", {\n        headers: { Authorization: \"Bearer \" + getToken() },\n      });\n      const data = await res.json();\n      setServices(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error(err);\n    }\n  }, []);\n\n  /* ================= FETCH APPOINTMENTS ================= */\n  const fetchAppointments = useCallback(async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/appointments\", {\n        headers: { Authorization: \"Bearer \" + getToken() },\n      });\n      const data = await res.json();\n      setAppointments(\n        Array.isArray(data) ? data.filter(a => a.status === \"booked\") : []\n      );\n    } catch (err) {\n      console.error(err);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchServices();\n    fetchAppointments();\n  }, [fetchServices, fetchAppointments]);\n\n  /* ================= BOOK APPOINTMENT ================= */\n  const handleBookAppointment = async (e) => {\n    e.preventDefault();\n    if (!slot) return alert(\"Please enter a slot\");\n\n    const isoSlot = new Date(slot).toISOString();\n\n    try {\n      await fetch(\"http://localhost:5000/appointments\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + getToken(),\n        },\n        body: JSON.stringify({\n          serviceId: Number(selectedServiceId),\n          slot: isoSlot,\n        }),\n      });\n\n      setSlot(\"\");\n      setSelectedServiceId(null);\n      fetchAppointments();\n      fetchServices();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  /* ================= CANCEL APPOINTMENT ================= */\n  const handleCancelAppointment = async (appointmentId) => {\n    try {\n      await fetch(`http://localhost:5000/appointments/${appointmentId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: \"Bearer \" + getToken() },\n      });\n\n      setAppointments(prev =>\n        prev.filter(a => a.id !== appointmentId)\n      );\n\n      fetchServices();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  /* ================= AVAILABLE SERVICES ================= */\n  const availableServices = services.filter(\n    s => !appointments.some(\n      a => a.serviceId === s.id && a.status === \"booked\"\n    )\n  );\n\n  /* ================= CALENDAR ================= */\n  useEffect(() => {\n    if (!selectedServiceId) return;\n\n    const service = services.find(s => s.id === selectedServiceId);\n    if (!service) return;\n\n    Promise.all([\n      fetch(\n        `http://localhost:5000/working-hours?providerEmail=${service.providerEmail}`,\n        { headers: { Authorization: \"Bearer \" + getToken() } }\n      ).then(res => res.json()),\n\n      fetch(\n        `http://localhost:5000/provider-appointments/${service.providerEmail}`,\n        { headers: { Authorization: \"Bearer \" + getToken() } }\n      ).then(res => res.json())\n    ])\n      .then(([whData, bookedData]) => {\n        const dayMap = { Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6 };\n        const today = new Date();\n        const monday = new Date(today);\n        monday.setDate(today.getDate() - today.getDay() + 1); // lundi\n\n        // === WORKING HOURS (hachures vert plus foncé) ===\n        let workingEvents = [];\n        (whData.hours || []).forEach(h => {\n          const dayIndex = dayMap[h.day];\n          if (dayIndex === undefined) return;\n\n          const day = new Date(monday);\n          day.setDate(monday.getDate() + ((dayIndex + 6) % 7));\n\n          const [sh, sm] = h.start.split(\":\").map(Number);\n          const [eh, em] = h.end.split(\":\").map(Number);\n\n          const start = new Date(day);\n          start.setHours(sh, sm, 0, 0);\n          const end = new Date(day);\n          end.setHours(eh, em, 0, 0);\n\n          workingEvents.push({\n            start: start.toISOString(),\n            end: end.toISOString(),\n            display: \"background\",\n            backgroundColor: \"#82e0aa\", // plus foncé\n            overlap: false,\n          });\n        });\n\n        // === BOOKED SLOTS ===\n        const bookedEvents = bookedData.map(a => ({\n          start: a.slot,\n          end: new Date(new Date(a.slot).getTime() + 30 * 60 * 1000).toISOString(),\n          title: \"❌ Already booked\",\n          backgroundColor: \"#f1948a\",\n          borderColor: \"#c0392b\",\n        }));\n\n        setCalendarEvents([...workingEvents, ...bookedEvents]);\n      })\n      .catch(console.error);\n  }, [selectedServiceId, services]);\n\n  /* ================= RENDER ================= */\n  return (\n    <div style={{ maxWidth: \"800px\", margin: \"20px auto\", padding: \"20px\", fontFamily: \"Arial\" }}>\n      <style>{`\n        .fc-day-today { background: transparent !important; }\n        .fc-timegrid-now-indicator {\n          border-color: red !important;\n          border-width: 2px;\n        }\n      `}</style>\n\n      <h1 style={{ textAlign: \"center\", color: \"#2c3e50\" }}>Customer Dashboard</h1>\n\n      {/* AVAILABLE SERVICES */}\n      <section style={{ marginBottom: \"40px\" }}>\n        <h2 style={{ color: \"#34495e\" }}>Available Services</h2>\n        {availableServices.length > 0 ? (\n          availableServices.map(s => (\n            <div\n              key={s.id}\n              style={{\n                border: \"1px solid #ccc\",\n                padding: \"15px\",\n                marginBottom: \"10px\",\n                borderRadius: \"5px\",\n                backgroundColor: \"#ecf0f1\",\n              }}\n            >\n              <h3 style={{ margin: \"0 0 5px 0\", color: \"#2c3e50\" }}>{s.title}</h3>\n              <p style={{ margin: \"0 0 5px 0\", color: \"#7f8c8d\" }}>{s.description}</p>\n              <strong style={{ color: \"#16a085\" }}>${s.price}</strong><br />\n              <button\n                onClick={() => setSelectedServiceId(s.id)}\n                style={{\n                  marginTop: \"10px\",\n                  padding: \"8px 12px\",\n                  backgroundColor: \"#3498db\",\n                  color: \"#fff\",\n                  border: \"none\",\n                  borderRadius: \"5px\",\n                  cursor: \"pointer\",\n                }}\n              >\n                Book Slot\n              </button>\n            </div>\n          ))\n        ) : <p>No services available.</p>}\n      </section>\n\n      {/* BOOK SLOT */}\n      {selectedServiceId && (\n        <section style={{ marginBottom: \"40px\" }}>\n          <h2 style={{ color: \"#34495e\" }}>Book a Slot</h2>\n          <form onSubmit={handleBookAppointment} style={{ marginBottom: \"20px\" }}>\n            <input\n              type=\"datetime-local\"\n              value={slot}\n              onChange={e => setSlot(e.target.value)}\n              required\n              style={{ padding: \"8px\", borderRadius: \"5px\", marginRight: \"10px\" }}\n            />\n            <button\n              type=\"submit\"\n              style={{\n                padding: \"8px 12px\",\n                backgroundColor: \"#27ae60\",\n                color: \"#fff\",\n                border: \"none\",\n                borderRadius: \"5px\",\n                cursor: \"pointer\",\n              }}\n            >\n              Book Appointment\n            </button>\n          </form>\n\n          <FullCalendar\n            plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n            initialView=\"timeGridWeek\"\n            events={calendarEvents}\n            height=\"auto\"\n            slotMinTime=\"08:00:00\"\n            slotMaxTime=\"20:00:00\"\n            allDaySlot={false}\n            nowIndicator={true}\n            slotDuration=\"00:30:00\"\n            slotLabelInterval=\"01:00\"\n            slotLabelFormat={{ hour: \"2-digit\", minute: \"2-digit\", hour12: false }}\n          />\n        </section>\n      )}\n\n      {/* MY APPOINTMENTS */}\n      <section>\n        <h2 style={{ color: \"#34495e\" }}>My Appointments</h2>\n        {appointments.length > 0 ? (\n          <ul style={{ listStyle: \"none\", padding: 0 }}>\n            {appointments.map(a => (\n              <li\n                key={a.id}\n                style={{\n                  border: \"1px solid #ccc\",\n                  padding: \"10px\",\n                  marginBottom: \"10px\",\n                  borderRadius: \"5px\",\n                  backgroundColor: \"#ecf0f1\",\n                }}\n              >\n                <strong>Service:</strong> {a.serviceTitle}<br />\n                <strong>Slot:</strong> {a.slot}<br />\n                <button\n                  onClick={() => handleCancelAppointment(a.id)}\n                  style={{\n                    marginTop: \"5px\",\n                    padding: \"5px 10px\",\n                    backgroundColor: \"#e74c3c\",\n                    color: \"#fff\",\n                    border: \"none\",\n                    borderRadius: \"3px\",\n                    cursor: \"pointer\",\n                  }}\n                >\n                  Cancel\n                </button>\n              </li>\n            ))}\n          </ul>\n        ) : <p>No appointments yet.</p>}\n      </section>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}